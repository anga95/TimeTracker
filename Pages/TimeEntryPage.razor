@page "/timeEntryPage"
@page "/"
@using TimeTracker.Pages.Components

<!-- Kalendergrid -->
<CalendarGrid
  Year="_currentYear"
  Month="_currentMonth"
  @bind-SelectedDay="_selectedDay"
  OnMonthDataLoaded="HandleMonthDataLoaded"
  OnMonthChanged="HandleMonthChanged"
  OnDaySelected="HandleDaySelected"
  @ref="_calendarGrid" />

<!-- Detaljvy för vald dag -->
@if (_selectedDay != DateTime.MinValue)
{
  <DayDetail
    @key="_selectedDay.Date"
    Day="_selectedDay"
    Items="_dayTimeEntry"
    Projects="_projects"
    @bind-TimeEntry="_newTimeEntry"
    CurrentUserId="@_currentUserId"
    IsAuthenticated="!string.IsNullOrEmpty(_currentUserId)"
    OnRefreshRequested="RefreshCalendarData"
    OnItemsChanged="HandleTimeEntriesChanged" />
}